<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eventos - Biblioteca Artemisa</title>
    <link rel="stylesheet" type="text/css"
        href="css/base1/pantallaprincipal.css?v=8" />
    <link rel="stylesheet" type="text/css" href="css/base1/pantallaprincipal.css?v=1" />
    <link rel="stylesheet" type="text/css" href="css/base2/Eventos.css?v=1" />
    <link rel="icon" href="imagenes/iconpage.png" type="image/x-icon" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <!-- Bootstrap CSS -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet" />
</h:head>
<h:body>
    <div class="layout-container">
        <aside class="sidebar">
       <div class="logo">
			<a href="pantallaprincipal.xhtml"> <img
				src="imagenes/logo-artemis.png" alt="Logo ARTEMIS" />
			</a>
		</div>

        <nav>
        <ul class="nav-menu">
            <li><a href="pantallaprincipal.xhtml" class="nav-link"><i
                    class="fas fa-home"></i> Inicio</a></li>
            <li><a href="Temario.xhtml" class="nav-link"><i
                    class="fas fa-paperclip"></i> Temario</a></li>
            <li><a href="Problemas.xhtml" class="nav-link"><i
                    class="fas fa-tasks"></i> Problemas</a></li>
            <li><a href="Libros.xhtml" class="nav-link"><i
                    class="fas fa-book"></i> Libros</a></li>
            <li><a href="Linkvaliosos.xhtml" class="nav-link"><i
                    class="fas fa-link"></i> Links Valiosos</a></li>
            <li><a href="Eventos.xhtml" class="nav-link active"><i
                    class="fas fa-calendar-alt"></i> Eventos</a></li>
        </ul>
        </nav>

        <div class="sidebar-footer">
            <p>Proyecto Artemisa 2025</p>
        </div>
        </aside>

        <!-- Contenido principal -->
        <main class="main-content">
        <div class="container mt-4">
            <div class="row">
                <div class="col-md-8">
                    <!-- Calendario -->
                    <div class="calendar-container">
                        <div class="calendar-header">
                            <div class="month-navigation">
                                <button class="btn-month" id="prev-month">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <div class="current-month">Marzo 2024</div>
                                <button class="btn-month" id="next-month">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>

                        <div class="calendar-grid">
                            <!-- Días de la semana -->
                            <div class="calendar-day-header">Dom</div>
                            <div class="calendar-day-header">Lun</div>
                            <div class="calendar-day-header">Mar</div>
                            <div class="calendar-day-header">Mié</div>
                            <div class="calendar-day-header">Jue</div>
                            <div class="calendar-day-header">Vie</div>
                            <div class="calendar-day-header">Sáb</div>

                            <!-- Los días del calendario se generarán dinámicamente con JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <!-- Lista de eventos -->
                    <div class="events-sidebar">
                        <h3 class="mb-3">Próximos Eventos</h3>
                        <!-- Los eventos se generarán dinámicamente con JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Formulario para agregar eventos -->
            <div class="event-form mt-4">
                <h3>Agregar Nuevo Evento</h3>
                <div class="event-fields">
                    <div class="form-group">
                        <label class="form-label" for="event-title">Título del
                            Evento</label> <input type="text" class="form-control" id="event-title"
                            placeholder="Ingresa el título del evento"/>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="event-date">Fecha</label> <input
                            type="date" class="form-control" id="event-date"/>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="event-time">Hora</label> <input
                            type="time" class="form-control" id="event-time"/>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="event-type">Tipo de Evento</label>
                        <select class="form-control" id="event-type">
                            <option value="general">General</option>
                            <option value="contest">Competencia</option>
                            <option value="important">Importante</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="event-description">Descripción</label>
                        <textarea class="form-control" id="event-description" rows="3"
                            placeholder="Descripción del evento"></textarea>
                    </div>

                    <div class="event-actions">
                        <button type="button" class="btn btn-primary" id="add-event-btn">Agregar
                            Evento</button>
                        <button type="button" class="btn btn-secondary" id="cancel-event-btn">Cancelar</button>
                    </div>
                </div>
            </div>
        </div>
        <footer>
		<div class="container">
			<p>© 2025 BIBLIOTECA ARTEMISA - Todos los derechos reservados</p>
			
		</div>
		</footer></main>
    </div>

    <!--  JavaScript para el calendario funcional -->
    <script>
    //<![CDATA[
    document.addEventListener('DOMContentLoaded', function() {
        // Variables globales
        let currentDate = new Date();
        let events = [
            {
                id: 1,
                title: "Starters 205",
                date: new Date(currentDate.getFullYear(), currentDate.getMonth(), 15),
                time: "10:00 AM",
                type: "contest",
                description: "Competencia de programación para principiantes"
            },
            {
                id: 2,
                title: "CFR (Div. 1)",
                date: new Date(currentDate.getFullYear(), currentDate.getMonth(), 20),
                time: "2:00 PM",
                type: "important",
                description: "Codeforces Round para división 1"
            },
            {
                id: 3,
                title: "CFR 1053 (Div. 2)",
                date: new Date(currentDate.getFullYear(), currentDate.getMonth(), 25),
                time: "4:00 PM",
                type: "general",
                description: "Codeforces Round para división 2"
            },
            {
                id: 4,
                title: "CFR 1053",
                date: new Date(currentDate.getFullYear(), currentDate.getMonth(), 30),
                time: "11:00 AM",
                type: "general",
                description: "Codeforces Round general"
            }
        ];

        // Elementos DOM
        const currentMonthElement = document.querySelector('.current-month');
        const calendarGrid = document.querySelector('.calendar-grid');
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');
        const eventsSidebar = document.querySelector('.events-sidebar');
        const addEventBtn = document.getElementById('add-event-btn');
        const cancelEventBtn = document.getElementById('cancel-event-btn');

        // Inicializar el calendario
        function initCalendar() {
            renderCalendar();
            renderEventsSidebar();
            setupEventListeners();
        }

        // Renderizar el calendario
        function renderCalendar() {
            // Limpiar el calendario (excepto los encabezados de días)
            const dayHeaders = document.querySelectorAll('.calendar-day-header');
            calendarGrid.innerHTML = '';
            dayHeaders.forEach(function(header) {
                calendarGrid.appendChild(header.cloneNode(true));
            });

            // Obtener información del mes actual
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // Actualizar el título del mes
            const monthNames = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
                "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
            currentMonthElement.textContent = monthNames[month] + " " + year;

            // Obtener el primer día del mes y el último día del mes
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            
            // Obtener el día de la semana del primer día (0 = Domingo, 6 = Sábado)
            const firstDayOfWeek = firstDay.getDay();

            // Obtener el último día del mes anterior
            const prevMonthLastDay = new Date(year, month, 0).getDate();

            // Días del mes anterior
            for (let i = firstDayOfWeek - 1; i >= 0; i--) {
                const dayElement = createDayElement(prevMonthLastDay - i, true);
                calendarGrid.appendChild(dayElement);
            }

            // Días del mes actual
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const dayDate = new Date(year, month, day);
                const isToday = dayDate.toDateString() === today.toDateString();
                const dayElement = createDayElement(day, false, isToday, dayDate);
                calendarGrid.appendChild(dayElement);
            }

            // Días del próximo mes para completar la cuadrícula
            const totalCells = 42; // 6 filas × 7 días
            const remainingCells = totalCells - (firstDayOfWeek + daysInMonth);
            
            for (let day = 1; day <= remainingCells; day++) {
                const dayElement = createDayElement(day, true);
                calendarGrid.appendChild(dayElement);
            }
        }

        // Crear elemento de día
        function createDayElement(dayNumber, isOtherMonth, isToday, date) {
            if (isToday === undefined) isToday = false;
            if (date === undefined) date = null;
            
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day';
            
            if (isOtherMonth) {
                dayElement.classList.add('other-month');
            }
            
            if (isToday) {
                dayElement.classList.add('current-day');
            }

            const dayNumberElement = document.createElement('div');
            dayNumberElement.className = 'day-number';
            dayNumberElement.textContent = dayNumber;
            dayElement.appendChild(dayNumberElement);

            // Agregar eventos para este día si no es de otro mes
            if (!isOtherMonth && date) {
                const dayEvents = getEventsForDate(date);
                dayEvents.forEach(function(event) {
                    const eventElement = document.createElement('div');
                    eventElement.className = 'event-item ' + event.type;
                    eventElement.textContent = event.title;
                    eventElement.setAttribute('data-event-id', event.id);
                    dayElement.appendChild(eventElement);
                    
                    // Agregar evento de clic para mostrar detalles
                    eventElement.addEventListener('click', function(e) {
                        e.stopPropagation();
                        showEventDetails(event);
                    });
                });
                
                if (dayEvents.length > 0) {
                    dayElement.classList.add('has-events');
                }
            }

            // Agregar evento de clic para agregar nuevo evento
            dayElement.addEventListener('click', function() {
                if (!isOtherMonth) {
                    setEventFormDate(date);
                }
            });

            return dayElement;
        }

        // Obtener eventos para una fecha específica
        function getEventsForDate(date) {
            return events.filter(function(event) {
                return event.date.toDateString() === date.toDateString();
            });
        }

        // Renderizar la barra lateral de eventos
        function renderEventsSidebar() {
            // Limpiar eventos existentes (excepto el título)
            const titleElement = eventsSidebar.querySelector('h3');
            eventsSidebar.innerHTML = '';
            eventsSidebar.appendChild(titleElement);

            // Ordenar eventos por fecha
            const sortedEvents = events.slice().sort(function(a, b) {
                return a.date - b.date;
            });
            
            // Agregar eventos a la barra lateral
            sortedEvents.forEach(function(event) {
                const eventElement = createEventSidebarElement(event);
                eventsSidebar.appendChild(eventElement);
            });
        }

        // Crear elemento de evento para la barra lateral
        function createEventSidebarElement(event) {
            const eventElement = document.createElement('div');
            eventElement.className = 'event-detail ' + event.type;
            
            const eventTime = document.createElement('div');
            eventTime.className = 'event-time';
            eventTime.textContent = formatEventDate(event.date) + ', ' + event.time;
            
            const eventTitle = document.createElement('div');
            eventTitle.className = 'event-title';
            eventTitle.textContent = event.title;
            
            const eventDescription = document.createElement('div');
            eventDescription.className = 'event-description';
            eventDescription.textContent = event.description;
            
            eventElement.appendChild(eventTime);
            eventElement.appendChild(eventTitle);
            eventElement.appendChild(eventDescription);
            
            // Agregar evento de clic para mostrar detalles
            eventElement.addEventListener('click', function() {
                showEventDetails(event);
            });
            
            return eventElement;
        }

        // Formatear fecha para mostrar en eventos
        function formatEventDate(date) {
            const monthNames = ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
                "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"];
            return monthNames[date.getMonth()] + " " + date.getDate();
        }

        // Mostrar detalles del evento
        function showEventDetails(event) {
            // Aquí puedes implementar un modal o una vista detallada
            alert('Evento: ' + event.title + '\nFecha: ' + event.date.toLocaleDateString() + '\nHora: ' + event.time + '\nDescripción: ' + event.description);
        }

        // Establecer la fecha en el formulario al hacer clic en un día
        function setEventFormDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const dateString = year + '-' + month + '-' + day;
            
            document.getElementById('event-date').value = dateString;
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Navegación del calendario
            prevMonthBtn.addEventListener('click', function() {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
                renderEventsSidebar();
            });

            nextMonthBtn.addEventListener('click', function() {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
                renderEventsSidebar();
            });

            // Agregar evento
            addEventBtn.addEventListener('click', function() {
                addNewEvent();
            });

            // Cancelar evento
            cancelEventBtn.addEventListener('click', function() {
                clearEventForm();
            });
        }

        // Agregar nuevo evento
        function addNewEvent() {
            const title = document.getElementById('event-title').value;
            const date = document.getElementById('event-date').value;
            const time = document.getElementById('event-time').value;
            const type = document.getElementById('event-type').value;
            const description = document.getElementById('event-description').value;

            // Validación básica
            if (!title || !date || !time || !description) {
                alert('Por favor, complete todos los campos obligatorios.');
                return;
            }

            // Crear nuevo evento
            const newEvent = {
                id: events.length > 0 ? Math.max.apply(null, events.map(function(e) { return e.id; })) + 1 : 1,
                title: title,
                date: new Date(date),
                time: formatTime(time),
                type: type,
                description: description
            };

            // Agregar a la lista de eventos
            events.push(newEvent);

            // Actualizar la vista
            renderCalendar();
            renderEventsSidebar();
            clearEventForm();
            
            alert('Evento agregado exitosamente!');
        }

        // Formatear hora de 24h a 12h
        function formatTime(time24) {
            const parts = time24.split(':');
            const hours = parseInt(parts[0]);
            const minutes = parts[1];
            const ampm = hours >= 12 ? 'PM' : 'AM';
            const hour12 = hours % 12 || 12;
            return hour12 + ':' + minutes + ' ' + ampm;
        }

        // Limpiar formulario de evento
        function clearEventForm() {
            document.getElementById('event-title').value = '';
            document.getElementById('event-date').value = '';
            document.getElementById('event-time').value = '';
            document.getElementById('event-type').value = 'general';
            document.getElementById('event-description').value = '';
        }

        // Inicializar el calendario
        initCalendar();
    });
    //]]>
    </script>

    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</h:body>
</html>